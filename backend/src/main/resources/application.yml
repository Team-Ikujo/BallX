server:
  port: ${SERVER_PORT}

spring:
  config:
    import:
      - optional:file:.env[.properties]
  application:
    name: ballx-backend
  datasource:
    url: ${DATASOURCE_URL}
    username: ${DATASOURCE_USERNAME}
    password: ${DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari:
      idle-timeout: 5000
      max-lifetime: 420000
      connection-timeout: 5000
      validation-timeout: 3000
  jpa:
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
      properties:
        hibernate:
          jdbc.time_zone: UTC
          format_sql: true
          show_sql: true
          dialect: org.hibernate.dialect.PostgreSQLDialect
  jackson:
    time-zone: Asia/Seoul
    date-format: yyyy-MM-dd'T'HH:mm:ss.SSSXXX
  data:
    redis:
      ssl:
        enabled: true
      cluster:
        nodes: ${REDIS_HOST}
        max-redirects: 3

# OTel 연동을 위한 JSON 로깅 설정 (Spring Boot 3.4+)
logging:
  structured:
    format:
      console: ${LOG_FORMAT:}  # 환경변수로 JSON 활성화 (LOG_FORMAT=logstash)
  level:
    root: INFO
    com.ballx: ${LOG_LEVEL:INFO}
    org.hibernate.SQL: WARN

jwt:
  secret: ${JWT_SECRET_KEY}
  access-valid-time: ${JWT_ACCESS_TIME}
  refresh-valid-time: ${JWT_REFRESH_TIME}

sms:
  api:
    key: ${SMS_API_KEY}
    secret: ${SMS_API_SECRET}
    sender: ${SMS_API_SENDER}
    content: "[BallX] 인증번호 [{code}]를 입력해주세요."
    domain: ${SMS_API_DOMAIN}

oauth:
  kakao:
    client-id: ${KAKAO_CLIENT}
    client-secret: ${KAKAO_SECRET}
    redirect-uri: ${KAKAO_REDIRECT_URI}
    token-url: ${KAKAO_TOKEN_URI:https://kauth.kakao.com/oauth/token}
    user-info-url: ${KAKAO_USER_INFO_URL:https://kapi.kakao.com/v2/user/me}
  naver:
    client-id: ${NAVER_CLIENT}
    client-secret: ${NAVER_SECRET}
    redirect-uri: ${NAVER_REDIRECT_URI}
    token-url: ${NAVER_TOKEN_URL:https://nid.naver.com/oauth2.0/token}
    user-info-url: ${NAVER_USER_INFO_URL:https://openapi.naver.com/v1/nid/me}
  google:
    client-id: ${GOOGLE_CLIENT}
    client-secret: ${GOOGLE_SECRET}
    redirect-uri: ${GOOGLE_REDIRECT_URI}
    token-url: ${GOOGLE_TOKEN_URL:https://oauth2.googleapis.com/token}
    user-info-url: ${GOOGLE_USER_INFO_URL:https://www.googleapis.com/oauth2/v3/userinfo}

rest-client:
  connect-timeout-seconds: 5
  read-timeout-seconds: 10